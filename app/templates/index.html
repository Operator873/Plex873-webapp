{% extends "base.html" %}

{% block content %}
<div class="movie-grid">
    {% for movie in movies %}
    <div class="movie-card" data-title="{{ movie.title }} {{ movie.year }}">
        <div class="poster-wrapper">
            {% if movie.metadata_cache %}
                <img src="{{ movie.metadata_cache.poster_url }}" alt="{{ movie.title }}" loading="lazy">
                <div class="rating-badge">{{ movie.metadata_cache.vote_average }}</div>
            {% else %}
                <div class="poster-placeholder">
                    <span>{{ movie.title }}</span>
                </div>
            {% endif %}
        </div>
        
        <div class="movie-info">
            <h3>{{ movie.title }}</h3>
            <span class="year">{{ movie.year }}</span>
        </div>
        
        <div class="overview-overlay">
            <h4>{{ movie.title }}</h4>
            <p class="meta-year">{{ movie.year }}</p>
            {% if movie.metadata_cache and movie.metadata_cache.overview %}
                <p class="plot">{{ movie.metadata_cache.overview | truncate(150) }}</p>
            {% else %}
                <p class="plot">No details available.</p>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}